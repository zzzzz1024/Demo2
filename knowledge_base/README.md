# 完整知识库索引与快速参考

## 📚 知识库结构

```
knowledge_base/
├── 酒馆核心架构/
│   ├── 调用顺序分析.md            # 预设、世界书、脚本、正则执行顺序详解
│   ├── 前端开发指南.md            # Vue.js前端开发最佳实践
│   ├── 系统架构总览.md            # SillyTavern完整架构分析
│   ├── TavernHelper-API参考.md    # 70+函数完整API文档
│   ├── 项目结构分析总结.md        # 项目结构和开发流程
│   ├── API连接与配置指南.md       # 各种API连接配置方法
│   ├── 0层游玩完整实现指南.md     # 0层游玩技术实现完整方案
│   └── 实用工具与示例.md          # 角色卡分析工具等实用工具
├── JS-Slash-Runner/
│   └── 完整文档.md                # TavernHelper核心文档
├── MagVarUpdate/
│   └── MagVarUpdate-完整文档.md   # 变量管理系统文档
└── SillyTavern/
    └── 核心文档.md                # SillyTavern主要功能文档
```

## 🔍 快速查找指南

### 调用顺序相关问题

**文件**: `酒馆核心架构/调用顺序分析.md`

**主要内容**:

- 6阶段执行流程：预处理 → 上下文构建 → 消息处理 → 脚本执行 → AI调用 → 后处理
- 预设、世界书、脚本、正则的具体执行时机
- 优先级和依赖关系
- 性能优化建议

**关键搜索词**: 执行顺序、预设优先级、世界书触发、脚本执行时机

### 前端开发问题

**文件**: `酒馆核心架构/前端开发指南.md`

**主要内容**:

- Vue.js组件开发模式
- TavernHelper前端集成
- UI组件注册和事件处理
- 响应式数据管理
- 样式和主题适配

**关键搜索词**: Vue组件、UI注册、事件监听、样式定制

### API和函数使用

**文件**: `酒馆核心架构/TavernHelper-API参考.md`

**主要内容**:

- 70+个API函数详细说明
- 变量管理(getVariable, setVariable)
- 事件系统(subscribe, trigger)
- 消息操作(addMessage, editMessage)
- UI管理(registerButton, showModal)

**关键搜索词**: API函数、变量操作、事件处理、消息管理

### 变量管理系统

**文件**: `MagVarUpdate/MagVarUpdate-完整文档.md`

**主要内容**:

- 全局、局部、角色、场景变量
- 变量处理流水线
- 角色状态管理
- 模板系统和表达式引擎
- 事件驱动架构

**关键搜索词**: 变量类型、状态管理、模板解析、表达式计算

### 系统架构理解

**文件**: `酒馆核心架构/系统架构总览.md`

**主要内容**:

- 核心组件关系图
- 数据流分析
- 扩展集成机制
- 性能优化策略
- 安全考虑

**关键搜索词**: 系统架构、组件关系、数据流、性能优化

## 🚀 常见开发场景

### 场景1: 创建新的脚本扩展

1. 查看 `调用顺序分析.md` 了解脚本执行时机
2. 参考 `TavernHelper-API参考.md` 选择合适的API
3. 使用 `前端开发指南.md` 设计UI界面
4. 利用 `MagVarUpdate-完整文档.md` 管理状态

### 场景2: 优化预设和世界书

1. 研读 `调用顺序分析.md` 理解执行流程
2. 查看 `MagVarUpdate-完整文档.md` 配置变量
3. 参考 `API连接与配置指南.md` 优化AI调用

### 场景3: 前端界面开发

1. 阅读 `前端开发指南.md` 学习开发模式
2. 查询 `TavernHelper-API参考.md` 获取UI API
3. 参考 `系统架构总览.md` 理解集成点

### 场景4: 性能调优

1. 分析 `调用顺序分析.md` 找到性能瓶颈
2. 使用 `系统架构总览.md` 的优化策略
3. 参考 `API连接与配置指南.md` 优化API调用

## 📖 学习路径推荐

### 初学者路径

1. **基础理解**: `项目结构分析总结.md` → `系统架构总览.md`
2. **核心概念**: `调用顺序分析.md` → `MagVarUpdate-完整文档.md`
3. **实践开发**: `前端开发指南.md` → `TavernHelper-API参考.md`

### 进阶开发者路径

1. **深入架构**: `系统架构总览.md` → `调用顺序分析.md`
2. **高级功能**: `TavernHelper-API参考.md` → `MagVarUpdate-完整文档.md`
3. **生产部署**: `API连接与配置指南.md` → 性能优化章节

### 特定需求路径

- **只做脚本**: `TavernHelper-API参考.md` → `调用顺序分析.md`
- **只做前端**: `前端开发指南.md` → UI相关API
- **只做配置**: `调用顺序分析.md` → `MagVarUpdate-完整文档.md`

## 🔧 开发工具和环境

### 必需工具

- **代码编辑器**: VS Code (推荐，有SillyTavern扩展)
- **版本控制**: Git
- **包管理器**: npm/pnpm
- **构建工具**: Webpack (项目已配置)

### 推荐扩展

- Vue.js扩展
- TypeScript支持
- ESLint和Prettier
- GitLens

### 开发环境设置

```bash
# 克隆项目
git clone [project-url]

# 安装依赖
pnpm install

# 启动开发模式
pnpm watch

# 启动MCP服务
pnpx @agentdeskai/browser-tools-server@latest
```

## 🐛 常见问题解决

### 执行顺序问题

**问题**: 脚本没有按预期执行
**解决**: 查看 `调用顺序分析.md` 确认执行阶段和条件

### 变量不生效

**问题**: 设置的变量没有生效
**解决**: 检查 `MagVarUpdate-完整文档.md` 中的作用域和生命周期

### UI异常

**问题**: 前端界面显示异常
**解决**: 参考 `前端开发指南.md` 检查组件注册和事件绑定

### API调用失败

**问题**: API函数调用报错
**解决**: 查阅 `TavernHelper-API参考.md` 确认函数签名和参数

### 性能问题

**问题**: 系统运行缓慢
**解决**: 使用 `系统架构总览.md` 中的性能优化策略

## 📝 贡献指南

### 文档更新

1. 发现问题或改进点
2. 修改相应的markdown文件
3. 确保示例代码可运行
4. 提交Pull Request

### 代码贡献

1. 遵循现有代码风格
2. 添加必要的注释和文档
3. 编写测试用例
4. 更新相关文档

## 🎯 最佳实践总结

### 开发原则

1. **模块化设计**: 功能独立，接口清晰
2. **性能优先**: 考虑执行效率和内存使用
3. **用户友好**: 提供良好的错误处理和提示
4. **文档完整**: 代码即文档，文档即代码

### 代码规范

1. **命名规范**: 使用有意义的变量和函数名
2. **注释规范**: 关键逻辑必须有注释
3. **错误处理**: 完善的异常捕获和处理
4. **类型安全**: 充分利用TypeScript类型系统

### 测试策略

1. **单元测试**: 核心函数必须有单元测试
2. **集成测试**: 关键流程的集成测试
3. **用户测试**: 真实场景的用户体验测试
4. **性能测试**: 关键路径的性能基准测试

---

**这个知识库涵盖了SillyTavern生态系统的所有重要方面，从基础概念到高级开发，从系统架构到实用API，为开发者提供了完整的技术参考资料。**

**更新时间**: 2024年1月
**维护者**: SillyTavern开发社区
**版本**: v1.0.0
