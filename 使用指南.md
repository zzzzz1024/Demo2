# SillyTavern 0层游玩开发工具集使用指南

## 快速开始

### 1. 项目概述
本项目为 SillyTavern 生态系统提供了完整的0层游玩（零层游戏）开发解决方案，包括：
- 角色卡分析工具
- 0层游玩实现指南
- 完整的知识库文档
- 实用示例代码

### 2. 核心工具

#### 角色卡分析工具
位置：`src/角色卡分析工具/`

**功能特性：**
- 支持多种格式：JSON、PNG、WebP、JPEG
- 自动检测0层游玩机制
- 5维度评估系统（自动化、用户友好、沉浸感、状态管理、内容生成）
- 智能改进建议生成
- 角色卡对比分析

**使用方法：**
```bash
# 启动开发环境
pnpm watch

# 运行角色卡分析工具
# 在 SillyTavern 中加载为扩展脚本
```

#### 知识库文档
位置：`knowledge_base/`

**核心文档：**
- `0层游玩完整实现指南.md` - 技术实现方案
- `TavernHelper-API参考.md` - API完整文档
- `调用顺序分析.md` - 执行流程详解
- `实用工具与示例.md` - 实用工具集合

### 3. 开发流程

#### 步骤1：环境准备
```bash
# 安装依赖
pnpm install

# 启动监听编译
pnpm watch
```

#### 步骤2：选择开发方向

**脚本开发：**
1. 复制 `初始模板/脚本/` 到 `src/` 下新文件夹
2. 参考 `src/脚本示例/` 中的示例代码
3. 使用 `TavernHelper-API参考.md` 查询API

**前端界面开发：**
1. 复制 `初始模板/前端界面/` 到 `src/` 下新文件夹
2. 参考 `src/界面示例/` 中的Vue组件
3. 使用 `前端开发指南.md` 了解最佳实践

**0层游玩实现：**
1. 阅读 `0层游玩完整实现指南.md`
2. 使用角色卡分析工具研究现有实现
3. 按照指南逐步实现各个模块

#### 步骤3：测试与部署
```bash
# 在 SillyTavern 中测试
# 导入编译后的脚本或界面文件

# 使用角色卡分析工具验证实现效果
```

### 4. 最佳实践

#### 代码结构
```
src/你的项目/
├── index.ts          # 入口文件
├── components/       # Vue组件（如果是界面项目）
├── utils/           # 工具函数
├── types/           # TypeScript类型定义
└── README.md        # 项目说明
```

#### 开发建议
1. **模块化设计**：将功能拆分为独立模块
2. **类型安全**：充分利用TypeScript类型系统
3. **API规范**：遵循TavernHelper API调用约定
4. **测试优先**：先在简单场景测试，再扩展功能
5. **文档完善**：为每个模块编写清晰的使用说明

### 5. 常见问题

#### Q: 如何调试脚本？
A: 使用 `console.log()` 或 `logMessage()` 函数，在浏览器控制台查看输出。

#### Q: 为什么API调用失败？
A: 检查 TavernHelper 是否正确加载，参考 `API连接与配置指南.md`。

#### Q: 角色卡分析结果不准确？
A: 确保角色卡格式正确，查看控制台错误信息，必要时手动调整分析参数。

#### Q: 如何提高0层游玩体验？
A: 参考分析工具的评估标准，重点优化自动化程度和用户体验。

### 6. 高级功能

#### 自定义分析标准
修改 `ZeroLayerAnalyzer.ts` 中的评估权重和标准。

#### 扩展文件格式支持
在 `CharacterCardImporter.ts` 中添加新的解析器。

#### 集成外部工具
使用 `background_management/scripts/` 中的同步脚本。

### 7. 项目结构说明

```
Demo2/
├── src/                    # 源代码目录
│   ├── 角色卡分析工具/      # 核心分析工具
│   ├── 脚本示例/           # 脚本开发示例
│   └── 界面示例/           # 前端界面示例
├── knowledge_base/         # 知识库文档
├── 初始模板/              # 开发模板
├── background_management/  # 背景资料管理
└── @types/                # TypeScript类型定义
```

### 8. 贡献指南

1. Fork 项目
2. 创建功能分支
3. 提交变更
4. 发起 Pull Request

---

更多详细信息请参考 `knowledge_base/` 中的具体文档。
