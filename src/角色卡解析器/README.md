# 角色卡解析器

一个基于Vue 3构建的PNG角色卡解析工具，专为酒馆助手(Tavern Helper)设计。

## 功能特性

### 🔍 PNG角色卡解析
- 支持拖拽或点击上传PNG格式的角色卡文件
- 使用SillyTavern官方解析算法，确保兼容性
- 自动处理多种编码格式(UTF-8, Latin1, Base64等)
- 智能纠错，处理常见的编码问题

### 📊 分类别展示
角色卡信息按类别组织展示：
- **基础信息**: 姓名、创作者、版本、标签
- **角色描述**: 详细的角色背景描述
- **性格特征**: 角色的性格特点
- **场景设定**: 角色所处的世界背景
- **对话内容**: 开场白、对话示例、备用问候语
- **技术设置**: 系统提示、历史后指令
- **扩展信息**: 角色书、扩展字段等
- **其他字段**: 未识别的自定义字段

### 📚 历史记录管理
- 自动保存解析历史，支持最多50条记录
- 按状态筛选(全部/成功/失败)
- 支持按角色名或文件名搜索
- 统计信息展示(总次数、成功率等)
- 支持导出历史记录为JSON文件
- 可展开查看详细解析结果

### 🎨 用户体验
- 现代化的渐变背景设计
- 响应式布局，支持移动端
- 直观的拖拽上传界面
- 实时解析状态反馈
- 友好的错误提示

## 技术实现

### 核心技术栈
- **Vue 3**: 使用Composition API构建响应式界面
- **Vue Router**: 实现单页面应用路由
- **TypeScript**: 提供类型安全
- **SCSS**: 现代化样式设计
- **酒馆变量系统**: 持久化存储解析历史

### 解析算法
基于`test_png_fixed.js`中的SillyTavern官方实现：
1. 验证PNG文件头
2. 解析PNG chunks
3. 查找tEXt chunk中的角色卡数据
4. 多种编码方式尝试解码
5. JSON解析和数据验证

### 项目结构
```
src/角色卡解析器/
├── index.html              # 入口HTML
├── index.ts                # 主入口文件
├── app.vue                 # 主应用组件
├── 渲染vue界面.ts           # Vue应用初始化
├── 加载和卸载时执行函数.ts   # 生命周期管理
├── png解析器.ts            # 核心解析逻辑
├── 角色卡解析器.vue         # 解析器主界面
├── 角色卡展示.vue           # 角色卡信息展示组件
└── 解析历史.vue             # 历史记录管理界面
```

## 使用方法

1. **加载界面**: 在酒馆助手中加载生成的`dist/角色卡解析器/index.html`
2. **上传角色卡**: 点击或拖拽PNG角色卡文件到上传区域
3. **查看结果**: 解析成功后会自动展示分类后的角色卡信息
4. **管理历史**: 切换到"解析历史"标签查看和管理历史记录

## 后续扩展计划

- [ ] 角色卡信息编辑功能
- [ ] 导出为新的PNG角色卡
- [ ] 批量解析多个文件
- [ ] 角色卡模板系统
- [ ] 角色卡对比功能
- [ ] 更多文件格式支持

## 开发说明

本项目遵循酒馆助手开发规范：
- 使用jQuery进行DOM操作
- 使用酒馆变量系统进行数据持久化
- 支持实时修改和热重载
- 兼容酒馆助手的接口系统
