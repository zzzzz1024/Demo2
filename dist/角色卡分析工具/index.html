<!doctype html><html lang="zh-CN"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>è§’è‰²å¡åˆ†æå·¥å…· - SillyTavern 0å±‚æ¸¸ç©åˆ†æ</title><script src="https://unpkg.com/vue@3/dist/vue.global.js"></script><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:linear-gradient(135deg,#667eea 0,#764ba2 100%);min-height:100vh;padding:20px}.container{max-width:1200px;margin:0 auto;background:#fff;border-radius:16px;box-shadow:0 20px 60px rgba(0,0,0,.1);overflow:hidden}.header{background:linear-gradient(135deg,#4f46e5 0,#7c3aed 100%);color:#fff;padding:30px;text-align:center}.header h1{font-size:2.5rem;margin-bottom:10px;font-weight:700}.header p{font-size:1.1rem;opacity:.9}.main-content{padding:40px}.upload-section{background:#f8fafc;border:3px dashed #cbd5e1;border-radius:12px;padding:40px;text-align:center;margin-bottom:30px;transition:all .3s ease}.upload-section:hover{border-color:#4f46e5;background:#f1f5f9}.upload-section.dragover{border-color:#4f46e5;background:#eef2ff;transform:scale(1.02)}.upload-icon{font-size:4rem;margin-bottom:20px;color:#64748b}.upload-text{font-size:1.2rem;color:#334155;margin-bottom:20px}.file-input{display:none}.upload-button{background:linear-gradient(135deg,#4f46e5 0,#7c3aed 100%);color:#fff;border:none;padding:12px 30px;border-radius:8px;font-size:1rem;cursor:pointer;transition:all .3s ease}.upload-button:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(79,70,229,.3)}.analysis-tabs{display:flex;margin-bottom:30px;background:#f1f5f9;border-radius:12px;padding:8px}.tab-button{flex:1;padding:12px 20px;border:none;background:0 0;border-radius:8px;cursor:pointer;font-size:1rem;color:#64748b;transition:all .3s ease}.tab-button.active{background:#fff;color:#4f46e5;box-shadow:0 2px 10px rgba(0,0,0,.1)}.tab-content{display:none}.tab-content.active{display:block}.result-card{background:#fff;border:1px solid #e2e8f0;border-radius:12px;padding:24px;margin-bottom:20px;box-shadow:0 4px 15px rgba(0,0,0,.05)}.result-card h3{color:#1e293b;margin-bottom:16px;font-size:1.3rem;border-bottom:2px solid #4f46e5;padding-bottom:8px}.data-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px}.data-item{background:#f8fafc;padding:16px;border-radius:8px;border-left:4px solid #4f46e5}.data-label{font-weight:600;color:#374151;margin-bottom:8px}.data-value{color:#6b7280;font-family:Consolas,Monaco,monospace;background:#fff;padding:8px 12px;border-radius:4px;border:1px solid #d1d5db;word-break:break-all}.analysis-score{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}.score-label{font-weight:600;color:#374151}.score-value{font-size:1.5rem;font-weight:700;padding:8px 16px;border-radius:20px;color:#fff}.score-excellent{background:#10b981}.score-good{background:#3b82f6}.score-average{background:#f59e0b}.score-poor{background:#ef4444}.tips-list{list-style:none;padding:0}.tips-list li{background:#fef3c7;border:1px solid #f59e0b;border-radius:8px;padding:12px 16px;margin-bottom:10px;position:relative;padding-left:40px}.tips-list li:before{content:'ğŸ’¡';position:absolute;left:12px;top:12px}.error-message{background:#fee2e2;border:1px solid #fca5a5;color:#dc2626;padding:16px;border-radius:8px;margin-bottom:20px}.loading{text-align:center;padding:40px}.spinner{border:4px solid #f3f4f6;border-top:4px solid #4f46e5;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:0 auto 20px}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.export-section{text-align:center;padding:20px;border-top:1px solid #e2e8f0;margin-top:30px}.export-button{background:#10b981;color:#fff;border:none;padding:12px 24px;border-radius:8px;font-size:1rem;cursor:pointer;margin:0 10px;transition:all .3s ease}.export-button:hover{background:#059669;transform:translateY(-1px)}.code-preview{background:#1e293b;color:#e2e8f0;padding:20px;border-radius:8px;font-family:Consolas,Monaco,monospace;font-size:.9rem;overflow-x:auto;margin-top:16px}.highlight-keyword{color:#60a5fa;font-weight:600}.highlight-string{color:#34d399}.highlight-number{color:#fbbf24}@media (max-width:768px){.container{margin:10px;border-radius:12px}.main-content{padding:20px}.header{padding:20px}.header h1{font-size:2rem}.data-grid{grid-template-columns:1fr}}</style><script type="module">var e={88:(e,t)=>{t.A=(e,t)=>{const n=e.__vccOpts||e;for(const[e,a]of t)n[e]=a;return n}}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const a=Vue;class r{}class s{extractors;constructor(){this.extractors=[new o,new l,new c,new i,new d,new p]}extractAllData(e){const t={basicInfo:{},personality:{},worldbook:[],regex:[],scripts:[],variables:[],automation:{stateTracking:[],autoResponses:[],dynamicContent:[],eventTriggers:[],variableManagement:[]}};for(const n of this.extractors){const a=n.extract(e);Object.assign(t,a)}return t.automation=this.extractAutomationMechanisms(e),this.postProcess(t)}extractAutomationMechanisms(e){return{stateTracking:this.findStateTracking(e),autoResponses:this.findAutoResponses(e),dynamicContent:this.findDynamicContent(e),eventTriggers:this.findEventTriggers(e),variableManagement:this.findVariableManagement(e)}}findStateTracking(e){const t=[],n=/\{\{(hp|health|ç”Ÿå‘½|è¡€é‡)\}\}/gi,a=/\{\{(mp|mana|é­”æ³•|é­”åŠ›)\}\}/gi,r=/\{\{(stamina|ä½“åŠ›|è€åŠ›)\}\}/gi;return this.containsPattern(e,n)&&t.push({type:'hp_tracking',pattern:n,description:'ç”Ÿå‘½å€¼çŠ¶æ€è·Ÿè¸ª',implementation:'variable_substitution'}),this.containsPattern(e,a)&&t.push({type:'mp_tracking',pattern:a,description:'é­”æ³•å€¼çŠ¶æ€è·Ÿè¸ª',implementation:'variable_substitution'}),this.containsPattern(e,r)&&t.push({type:'stamina_tracking',pattern:r,description:'ä½“åŠ›å€¼çŠ¶æ€è·Ÿè¸ª',implementation:'variable_substitution'}),t}findAutoResponses(e){const t=[],n=this.getCardText(e).matchAll(/\{\{#if\s+(.+?)\}\}(.*?)\{\{\/if\}\}/gs);for(const e of n)t.push({trigger:e[1],response:e[2],conditions:[e[1]]});return t}findDynamicContent(e){const t=[],n=this.getCardText(e).matchAll(/\{\{random\s*:\s*(.+?)\}\}/gi);for(const e of n)t.push({contentType:'random_selection',generator:'random',variables:[e[1]]});return t}findEventTriggers(e){const t=[];if(e.data?.extensions?.tavern_helper){const n=e.data.extensions.tavern_helper;if(n.events)for(const e of n.events)t.push({event:e.trigger,action:e.action,priority:e.priority||1})}return t}findVariableManagement(e){const t=[],n=this.getCardText(e).matchAll(/\{\{(get|set)Variable\s*:\s*(.+?)\}\}/gi);for(const e of n)t.push({scope:'character',variables:[e[2]],operations:[e[1]]});return t}containsPattern(e,t){const n=this.getCardText(e);return t.test(n)}getCardText(e){let t='';return e.description&&(t+=e.description),e.personality&&(t+=e.personality),e.scenario&&(t+=e.scenario),e.first_mes&&(t+=e.first_mes),e.mes_example&&(t+=e.mes_example),e.data&&(t+=JSON.stringify(e.data)),t}postProcess(e){return e}}class o extends r{extract(e){return{basicInfo:{name:e.name,description:e.description,personality:e.personality,scenario:e.scenario,first_mes:e.first_mes,mes_example:e.mes_example,creator:e.creator,character_version:e.character_version,tags:e.tags||[]}}}}class l extends r{extract(e){return{personality:{traits:this.extractTraits(e.personality||''),speech_style:this.extractSpeechStyle(e.mes_example||''),behavior_patterns:this.extractBehaviorPatterns(e)}}}extractTraits(e){const t=[],n=[/æ€§æ ¼[:ï¼š](.+?)[\nã€‚]/g,/ç‰¹å¾[:ï¼š](.+?)[\nã€‚]/g,/çˆ±å¥½[:ï¼š](.+?)[\nã€‚]/g];for(const a of n){const n=e.matchAll(a);for(const e of n)t.push(e[1].trim())}return t}extractSpeechStyle(e){return{formality:this.analyzeFormalityLevel(e),emotion:this.analyzeEmotionalTone(e),vocabulary:this.analyzeVocabulary(e)}}extractBehaviorPatterns(e){return{}}analyzeFormalityLevel(e){return'casual'}analyzeEmotionalTone(e){return'neutral'}analyzeVocabulary(e){return[]}}class c extends r{extract(e){const t=[];if(e.data?.character_book?.entries)for(const n of e.data.character_book.entries)t.push({id:n.id,keys:n.keys,content:n.content,enabled:n.enabled,insertion_order:n.insertion_order,case_sensitive:n.case_sensitive,name:n.name,priority:n.priority||0,selective:n.selective,secondary_keys:n.secondary_keys});return{worldbook:t}}}class i extends r{extract(e){const t=[],n=this.getFullText(e).matchAll(/\/(.+?)\//g);for(const e of n)t.push({pattern:e[1],source:'auto_detected',usage:'unknown'});return{regex:t}}getFullText(e){let t='';return e.description&&(t+=e.description),e.personality&&(t+=e.personality),e.scenario&&(t+=e.scenario),e.data&&(t+=JSON.stringify(e.data)),t}}class d extends r{extract(e){const t=[],n=this.getFullText(e).matchAll(/<script>(.*?)<\/script>/gs);for(const e of n)t.push({code:e[1],type:'javascript',embedded:!0});return{scripts:t}}getFullText(e){let t='';return e.description&&(t+=e.description),e.personality&&(t+=e.personality),e.scenario&&(t+=e.scenario),e.data&&(t+=JSON.stringify(e.data)),t}}class p extends r{extract(e){const t=[],n=this.getFullText(e).matchAll(/\{\{([^}]+)\}\}/g),a=new Set;for(const e of n){const n=e[1].trim();a.has(n)||(a.add(n),t.push({name:n,type:this.guessVariableType(n),scope:this.guessVariableScope(n)}))}return{variables:t}}getFullText(e){let t='';return e.description&&(t+=e.description),e.personality&&(t+=e.personality),e.scenario&&(t+=e.scenario),e.data&&(t+=JSON.stringify(e.data)),t}guessVariableType(e){return/^(hp|mp|stamina|level|exp|money)$/i.test(e)?'numeric':/^(name|location|status|mood)$/i.test(e)?'string':'unknown'}guessVariableScope(e){return/^(char_|character_)/.test(e)?'character':/^(global_|system_)/.test(e)?'global':'local'}}class m{supportedFormats=['.json','.png','.webp','.jpg'];parsers=new Map;constructor(){this.initializeParsers()}async importCard(e){const t=this.getFileExtension(e.name),n=this.parsers.get(t);if(!n)throw new Error(`ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼: ${t}`);const a=await this.readFile(e),r=await n.parse(a);return this.validateAndNormalize(r)}async importMultipleCards(e){const t=Array.from(e).map(e=>this.importCard(e));return(await Promise.allSettled(t)).filter(e=>'fulfilled'===e.status).map(e=>e.value)}getFileExtension(e){return e.substring(e.lastIndexOf('.'))}async readFile(e){const t=this.getFileExtension(e.name);return new Promise('.json'===t?(t,n)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=n,a.readAsText(e)}:(t,n)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=n,a.readAsArrayBuffer(e)})}validateAndNormalize(e){return{id:e.id||this.generateId(),name:e.name||'æœªå‘½åè§’è‰²',description:e.description||'',creator:e.creator,version:e.version,data:e}}generateId(){return'card_'+Date.now()+'_'+Math.random().toString(36).substr(2,9)}initializeParsers(){this.parsers.set('.json',new u),this.parsers.set('.png',new g),this.parsers.set('.webp',new h),this.parsers.set('.jpg',new y)}}class u{async parse(e){const t='string'==typeof e?JSON.parse(e):e;return{id:t.id||this.generateId(),name:t.name||t.data?.name||'æœªå‘½åè§’è‰²',description:t.description||t.data?.description||'',creator:t.creator||t.data?.creator,version:t.version||t.data?.version,data:t}}generateId(){return'json_'+Date.now()+'_'+Math.random().toString(36).substr(2,9)}}class g{async parse(e){try{const t=new Uint8Array(e),n=this.extractDataFromPng(t);if(!n)throw new Error('PNGæ–‡ä»¶ä¸­æœªæ‰¾åˆ°æœ‰æ•ˆçš„è§’è‰²å¡æ•°æ®');let a=n;return n.spec&&n.data&&(a=n.data),{id:this.generateId(),name:a.name||'æœªå‘½åè§’è‰²',description:a.description||'',creator:a.creator||a.creator_notes,version:a.character_version,data:n}}catch(e){throw console.error('PNGè§£æé”™è¯¯:',e),new Error(`PNGè§’è‰²å¡è§£æå¤±è´¥: ${e instanceof Error?e.message:'æœªçŸ¥é”™è¯¯'}`)}}extractDataFromPng(e,t='chara'){console.log('å°è¯•è§£æPNGè§’è‰²å¡...');const n=new Uint8Array(4),a=new Uint32Array(n.buffer);if(!e||137!==e[0]||80!==e[1]||78!==e[2]||71!==e[3]||13!==e[4]||10!==e[5]||26!==e[6]||10!==e[7])return console.log('PNGæ–‡ä»¶å¤´æ— æ•ˆ'),null;let r=!1;const s=[];let o=8;for(;o<e.length;){n[3]=e[o++],n[2]=e[o++],n[1]=e[o++],n[0]=e[o++];const t=a[0]+4,l=new Uint8Array(t);l[0]=e[o++],l[1]=e[o++],l[2]=e[o++],l[3]=e[o++];const c=String.fromCharCode(l[0])+String.fromCharCode(l[1])+String.fromCharCode(l[2])+String.fromCharCode(l[3]);if(s.length||'IHDR'===c||console.log('è­¦å‘Š: IHDRå¤´ç¼ºå¤±'),'IEND'===c){r=!0,s.push({name:c,data:new Uint8Array(0)});break}for(let n=4;n<t;n++)l[n]=e[o++];n[3]=e[o++],n[2]=e[o++],n[1]=e[o++],n[0]=e[o++];const i=new Uint8Array(l.buffer.slice(4));s.push({name:c,data:i})}r||console.log('.pngæ–‡ä»¶è¿‡æ—©ç»“æŸ: æ²¡æœ‰æ‰¾åˆ°IENDå¤´');const l=s.filter(e=>'tEXt'===e.name&&e.data.length>t.length&&e.data.slice(0,t.length).every((e,n)=>String.fromCharCode(e)===t[n]));if(0===l.length)return console.log('PNGå›¾ç‰‡ä¸åŒ…å«æ•°æ®'),null;try{let e='';const n=l[0].data;for(let a=t.length+1;a<n.length;a++)e+=String.fromCharCode(n[a]);const a=JSON.parse(atob(e));return console.log('æˆåŠŸè§£æPNGè§’è‰²å¡æ•°æ®:',a),a}catch(e){return console.log('è§£ç å›¾ç‰‡ä¸­çš„base64æ•°æ®æ—¶å‡ºé”™: '+e),null}}generateId(){return'png_'+Date.now()+'_'+Math.random().toString(36).substr(2,9)}}class h{async parse(e){try{const t=new Uint8Array(e);if(82!==t[0]||73!==t[1]||70!==t[2]||70!==t[3])throw new Error('ä¸æ˜¯æœ‰æ•ˆçš„WebPæ–‡ä»¶');if(87!==t[8]||69!==t[9]||66!==t[10]||80!==t[11])throw new Error('ä¸æ˜¯æœ‰æ•ˆçš„WebPæ–‡ä»¶');const n=this.extractWebPMetadata(t);let a=null;const r=['UserComment','ImageDescription','chara','character'];for(const e of r)if(n[e])try{const t=atob(n[e]);a=JSON.parse(t);break}catch(t){try{a=JSON.parse(n[e]);break}catch(t){console.warn(`æ— æ³•è§£æWebP metadataé”® ${e}:`,t)}}if(!a)throw new Error('WebPæ–‡ä»¶ä¸­æœªæ‰¾åˆ°æœ‰æ•ˆçš„è§’è‰²å¡æ•°æ®');return a.spec&&a.data&&(a=a.data),{id:this.generateId(),name:a.name||'æœªå‘½åè§’è‰²',description:a.description||'',creator:a.creator||a.creator_notes,version:a.character_version,data:a}}catch(e){throw console.error('WebPè§£æé”™è¯¯:',e),new Error(`WebPè§’è‰²å¡è§£æå¤±è´¥: ${e instanceof Error?e.message:'æœªçŸ¥é”™è¯¯'}`)}}extractWebPMetadata(e){const t={};let n=12;for(;n<e.length-8;){const a=String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3]);n+=4;const r=e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24;if(n+=4,'EXIF'===a){const a=e.slice(n,n+r),s=this.parseEXIF(a);Object.assign(t,s)}if('XMP '===a){const a=new TextDecoder('utf8').decode(e.slice(n,n+r)),s=this.parseXMP(a);Object.assign(t,s)}n+=r,r%2==1&&n++}return t}parseEXIF(e){const t={};try{const n=new TextDecoder('utf8').decode(e).match(/\{[^}]+\}/);n&&(t.UserComment=n[0])}catch(e){console.warn('EXIFè§£æå¤±è´¥:',e)}return t}parseXMP(e){const t={};try{const n=e.match(/<dc:description[^>]*>([^<]+)<\/dc:description>/);n&&(t.ImageDescription=n[1]);const a=e.match(/<chara[^>]*>([^<]+)<\/chara>/);a&&(t.chara=a[1])}catch(e){console.warn('XMPè§£æå¤±è´¥:',e)}return t}generateId(){return'webp_'+Date.now()+'_'+Math.random().toString(36).substr(2,9)}}class y{async parse(e){try{const t=new Uint8Array(e);if(255!==t[0]||216!==t[1])throw new Error('ä¸æ˜¯æœ‰æ•ˆçš„JPEGæ–‡ä»¶');const n=this.extractJPEGMetadata(t);let a=null;const r=['UserComment','ImageDescription','chara','character'];for(const e of r)if(n[e])try{const t=atob(n[e]);a=JSON.parse(t);break}catch(t){try{a=JSON.parse(n[e]);break}catch(t){console.warn(`æ— æ³•è§£æJPEG metadataé”® ${e}:`,t)}}if(!a)throw new Error('JPEGæ–‡ä»¶ä¸­æœªæ‰¾åˆ°æœ‰æ•ˆçš„è§’è‰²å¡æ•°æ®');return a.spec&&a.data&&(a=a.data),{id:this.generateId(),name:a.name||'æœªå‘½åè§’è‰²',description:a.description||'',creator:a.creator||a.creator_notes,version:a.character_version,data:a}}catch(e){throw console.error('JPEGè§£æé”™è¯¯:',e),new Error(`JPEGè§’è‰²å¡è§£æå¤±è´¥: ${e instanceof Error?e.message:'æœªçŸ¥é”™è¯¯'}`)}}extractJPEGMetadata(e){const t={};let n=2;for(;n<e.length-4;){if(255!==e[n]){n++;continue}const a=e[n+1];if(n+=2,225===a){const a=e[n]<<8|e[n+1];n+=2;if('Exif'===String.fromCharCode(e[n],e[n+1],e[n+2],e[n+3])){const r=e.slice(n+6,n+a-2),s=this.parseJPEGEXIF(r);Object.assign(t,s)}n+=a-2}else if(254===a){const a=e[n]<<8|e[n+1];n+=2;const r=new TextDecoder('utf8').decode(e.slice(n,n+a-2));try{JSON.parse(r),t.Comment=r}catch(e){t.Comment=r}n+=a-2}else{n+=e[n]<<8|e[n+1]}}return t}parseJPEGEXIF(e){const t={};try{const n=new TextDecoder('utf8').decode(e).match(/\{[^}]+\}/);n&&(t.UserComment=n[0])}catch(e){console.warn('JPEG EXIFè§£æå¤±è´¥:',e)}return t}generateId(){return'jpeg_'+Date.now()+'_'+Math.random().toString(36).substr(2,9)}}class v{}class f{criteriaCheckers;constructor(){this.criteriaCheckers=[new k,new E,new b,new V,new w]}analyzeZeroLayerImplementation(e){const t={overallScore:0,categories:{},recommendations:[],strengths:[],weaknesses:[],implementationSuggestions:[]};let n=0;for(const a of this.criteriaCheckers){const r=a.check(e);t.categories[a.category]=r,t.overallScore+=r.score*r.weight,n+=r.weight}return t.overallScore=t.overallScore/n*5,t.overallScore=Math.round(100*t.overallScore)/100,this.generateRecommendations(t)}generateRecommendations(e){const t=Object.entries(e.categories).filter(([_,e])=>e.score<.6).map(([e,t])=>({category:e,...t}));for(const n of t)e.recommendations.push(...this.getImprovementSuggestions(n));return this.analyzeStrengthsAndWeaknesses(e),e}getImprovementSuggestions(e){const t=[];switch(e.category){case'automation':t.push({type:'automation',priority:'high',title:'æ·»åŠ è‡ªåŠ¨åŒ–çŠ¶æ€ç®¡ç†',description:'å®ç°HP/MPç­‰å±æ€§çš„è‡ªåŠ¨è·Ÿè¸ªå’Œæ›´æ–°æœºåˆ¶',implementation:this.generateAutomationCode(),expectedResults:['è§’è‰²çŠ¶æ€è‡ªåŠ¨æ›´æ–°','å‡å°‘æ‰‹åŠ¨è¾“å…¥','æé«˜æ¸¸æˆæ²‰æµ¸æ„Ÿ']});break;case'user_friendliness':t.push({type:'ux',priority:'medium',title:'ç®€åŒ–ç”¨æˆ·äº¤äº’',description:'æ·»åŠ å¿«é€Ÿæ“ä½œæŒ‰é’®å’Œæ™ºèƒ½å»ºè®®ç³»ç»Ÿ',implementation:this.generateUXCode(),expectedResults:['æ“ä½œæ›´ç®€å•ç›´è§‚','å‡å°‘å­¦ä¹ æˆæœ¬','æé«˜ç”¨æˆ·æ»¡æ„åº¦']});break;case'immersion':t.push({type:'immersion',priority:'high',title:'å¢å¼ºæ²‰æµ¸æ„Ÿ',description:'ä¼˜åŒ–è§’è‰²ä¸€è‡´æ€§å’Œä¸–ç•Œè§‚å®Œæ•´æ€§',implementation:this.generateImmersionCode(),expectedResults:['è§’è‰²è¡¨ç°æ›´ä¸€è‡´','ä¸–ç•Œè§‚æ›´å®Œæ•´','äº¤äº’æ›´è‡ªç„¶']});break;case'state_management':t.push({type:'state',priority:'high',title:'å®Œå–„çŠ¶æ€ç®¡ç†',description:'å®ç°å®Œæ•´çš„çŠ¶æ€æŒä¹…åŒ–å’ŒåŒæ­¥æœºåˆ¶',implementation:this.generateStateCode(),expectedResults:['çŠ¶æ€æ•°æ®å¯é ä¿å­˜','æ¸¸æˆè¿›åº¦ä¸ä¸¢å¤±','çŠ¶æ€å˜åŒ–å®æ—¶åŒæ­¥']});break;case'content_generation':t.push({type:'content',priority:'medium',title:'ä¼˜åŒ–å†…å®¹ç”Ÿæˆ',description:'å®ç°åŠ¨æ€å†…å®¹ç”Ÿæˆå’Œä¸ªæ€§åŒ–å“åº”',implementation:this.generateContentCode(),expectedResults:['å†…å®¹æ›´åŠ ä¸°å¯Œå¤šæ ·','å“åº”æ›´å…·ä¸ªæ€§åŒ–','é‡å¤å†…å®¹å‡å°‘']})}return t}analyzeStrengthsAndWeaknesses(e){const t=Object.entries(e.categories).filter(([_,e])=>e.score>=.8),n=Object.entries(e.categories).filter(([_,e])=>e.score<.5);for(const[n,a]of t)e.strengths.push(`${this.getCategoryName(n)}: ${a.details[0]||'å®ç°è‰¯å¥½'}`);for(const[t,a]of n)e.weaknesses.push(`${this.getCategoryName(t)}: ${a.details[0]||'éœ€è¦æ”¹è¿›'}`)}getCategoryName(e){return{automation:'è‡ªåŠ¨åŒ–',user_friendliness:'ç”¨æˆ·å‹å¥½æ€§',immersion:'æ²‰æµ¸æ„Ÿ',state_management:'çŠ¶æ€ç®¡ç†',content_generation:'å†…å®¹ç”Ÿæˆ'}[e]||e}generateAutomationCode(){return'\n// è‡ªåŠ¨çŠ¶æ€ç®¡ç†ç¤ºä¾‹\nclass AutoStateManager {\n  constructor() {\n    this.stateTrackers = new Map();\n    this.initialize();\n  }\n  \n  initialize() {\n    // ç›‘å¬æ¶ˆæ¯å˜åŒ–\n    TavernHelper.subscribe(\'message_received\', (msg) => {\n      this.updateStateFromMessage(msg);\n    });\n  }\n  \n  updateStateFromMessage(message) {\n    // è§£æä¼¤å®³\n    const damageMatch = message.match(/å—åˆ°äº†?(\\d+)ç‚¹?ä¼¤å®³/);\n    if (damageMatch) {\n      const damage = parseInt(damageMatch[1]);\n      const currentHp = TavernHelper.getVariable(\'char_hp\') || 100;\n      TavernHelper.setVariable(\'char_hp\', Math.max(0, currentHp - damage));\n    }\n    \n    // è§£ææ²»ç–—\n    const healMatch = message.match(/æ¢å¤äº†?(\\d+)ç‚¹?ç”Ÿå‘½/);\n    if (healMatch) {\n      const heal = parseInt(healMatch[1]);\n      const currentHp = TavernHelper.getVariable(\'char_hp\') || 100;\n      const maxHp = TavernHelper.getVariable(\'char_max_hp\') || 100;\n      TavernHelper.setVariable(\'char_hp\', Math.min(maxHp, currentHp + heal));\n    }\n  }\n}\n\n// å¯ç”¨è‡ªåŠ¨çŠ¶æ€ç®¡ç†\nnew AutoStateManager();\n'}generateUXCode(){return'\n// ç”¨æˆ·ä½“éªŒä¼˜åŒ–ç¤ºä¾‹\nclass UXEnhancer {\n  constructor() {\n    this.addQuickActions();\n    this.addSmartSuggestions();\n  }\n  \n  addQuickActions() {\n    // æ·»åŠ å¿«é€Ÿæ“ä½œæŒ‰é’®\n    TavernHelper.ui.addQuickAction(\'æŸ¥çœ‹çŠ¶æ€\', () => {\n      const hp = TavernHelper.getVariable(\'char_hp\');\n      const mp = TavernHelper.getVariable(\'char_mp\');\n      TavernHelper.ui.showToast(`HP: ${hp}, MP: ${mp}`);\n    });\n    \n    TavernHelper.ui.addQuickAction(\'ä½¿ç”¨è¯æ°´\', () => {\n      const potions = TavernHelper.getVariable(\'inventory_potions\') || 0;\n      if (potions > 0) {\n        TavernHelper.setVariable(\'inventory_potions\', potions - 1);\n        const currentHp = TavernHelper.getVariable(\'char_hp\');\n        TavernHelper.setVariable(\'char_hp\', currentHp + 50);\n        TavernHelper.ui.showToast(\'ä½¿ç”¨äº†æ²»ç–—è¯æ°´ï¼Œæ¢å¤50HP\');\n      }\n    });\n  }\n  \n  addSmartSuggestions() {\n    // æ™ºèƒ½å»ºè®®ç³»ç»Ÿ\n    TavernHelper.subscribe(\'user_input\', (input) => {\n      const suggestions = this.generateSuggestions(input);\n      if (suggestions.length > 0) {\n        TavernHelper.ui.showSuggestions(suggestions);\n      }\n    });\n  }\n  \n  generateSuggestions(input) {\n    const suggestions = [];\n    \n    if (input.includes(\'å•†åº—\') || input.includes(\'ä¹°\')) {\n      suggestions.push(\'æŸ¥çœ‹é‡‘å¸æ•°é‡\');\n      suggestions.push(\'æµè§ˆå•†å“åˆ—è¡¨\');\n    }\n    \n    if (input.includes(\'æˆ˜æ–—\') || input.includes(\'æ”»å‡»\')) {\n      suggestions.push(\'æ£€æŸ¥æ­¦å™¨çŠ¶æ€\');\n      suggestions.push(\'æŸ¥çœ‹æ•Œäººä¿¡æ¯\');\n    }\n    \n    return suggestions;\n  }\n}\n\nnew UXEnhancer();\n'}generateImmersionCode(){return'\n// æ²‰æµ¸æ„Ÿå¢å¼ºç¤ºä¾‹\nclass ImmersionEnhancer {\n  constructor() {\n    this.personalityTracker = new PersonalityTracker();\n    this.contextManager = new ContextManager();\n  }\n  \n  enhanceResponse(response) {\n    // ç¡®ä¿è§’è‰²ä¸€è‡´æ€§\n    response = this.personalityTracker.applyPersonality(response);\n    \n    // æ·»åŠ ç¯å¢ƒæè¿°\n    response = this.contextManager.addContextualDetails(response);\n    \n    return response;\n  }\n}\n\nclass PersonalityTracker {\n  applyPersonality(response) {\n    const personality = TavernHelper.getVariable(\'char_personality\');\n    \n    // æ ¹æ®æ€§æ ¼è°ƒæ•´è¯­è¨€é£æ ¼\n    if (personality === \'shy\') {\n      response = response.replace(/!/g, \'...\');\n    } else if (personality === \'confident\') {\n      response = response.replace(/\\.\\.\\./, \'!\');\n    }\n    \n    return response;\n  }\n}\n\nclass ContextManager {\n  addContextualDetails(response) {\n    const location = TavernHelper.getVariable(\'current_location\');\n    const weather = TavernHelper.getVariable(\'weather\');\n    const timeOfDay = TavernHelper.getVariable(\'time_of_day\');\n    \n    // æ·»åŠ ç¯å¢ƒç»†èŠ‚\n    if (location && !response.includes(location)) {\n      response += ` *åœ¨${location}ä¸­*`;\n    }\n    \n    return response;\n  }\n}\n'}generateStateCode(){return'\n// çŠ¶æ€ç®¡ç†ä¼˜åŒ–ç¤ºä¾‹\nclass StateManager {\n  constructor() {\n    this.stateSchema = this.defineStateSchema();\n    this.persistenceManager = new PersistenceManager();\n    this.syncManager = new SyncManager();\n  }\n  \n  defineStateSchema() {\n    return {\n      character: {\n        hp: { type: \'number\', min: 0, max: 100, default: 100 },\n        mp: { type: \'number\', min: 0, max: 100, default: 100 },\n        level: { type: \'number\', min: 1, default: 1 },\n        experience: { type: \'number\', min: 0, default: 0 }\n      },\n      inventory: {\n        gold: { type: \'number\', min: 0, default: 100 },\n        items: { type: \'array\', default: [] }\n      },\n      progress: {\n        current_quest: { type: \'string\', default: null },\n        completed_quests: { type: \'array\', default: [] }\n      }\n    };\n  }\n  \n  setState(path, value) {\n    // éªŒè¯æ•°æ®ç±»å‹å’ŒèŒƒå›´\n    if (this.validateState(path, value)) {\n      TavernHelper.setVariable(path, value);\n      this.persistenceManager.save();\n      this.syncManager.sync(path, value);\n    }\n  }\n  \n  validateState(path, value) {\n    const schema = this.getSchemaForPath(path);\n    if (!schema) return true;\n    \n    // ç±»å‹æ£€æŸ¥\n    if (schema.type && typeof value !== schema.type) {\n      return false;\n    }\n    \n    // èŒƒå›´æ£€æŸ¥\n    if (schema.min !== undefined && value < schema.min) {\n      return false;\n    }\n    \n    if (schema.max !== undefined && value > schema.max) {\n      return false;\n    }\n    \n    return true;\n  }\n}\n'}generateContentCode(){return'\n// å†…å®¹ç”Ÿæˆä¼˜åŒ–ç¤ºä¾‹\nclass ContentGenerator {\n  constructor() {\n    this.templates = new TemplateManager();\n    this.variationEngine = new VariationEngine();\n  }\n  \n  generateDynamicContent(type, context) {\n    const template = this.templates.getTemplate(type);\n    const variations = this.variationEngine.generateVariations(template, context);\n    \n    return this.selectBestVariation(variations, context);\n  }\n  \n  selectBestVariation(variations, context) {\n    // æ ¹æ®ä¸Šä¸‹æ–‡é€‰æ‹©æœ€åˆé€‚çš„å˜ä½“\n    const recentContent = TavernHelper.getVariable(\'recent_content\') || [];\n    \n    // é¿å…é‡å¤å†…å®¹\n    const uniqueVariations = variations.filter(v => \n      !recentContent.includes(v.hash)\n    );\n    \n    const selected = uniqueVariations[Math.floor(Math.random() * uniqueVariations.length)];\n    \n    // è®°å½•å·²ä½¿ç”¨å†…å®¹\n    recentContent.push(selected.hash);\n    if (recentContent.length > 10) {\n      recentContent.shift();\n    }\n    TavernHelper.setVariable(\'recent_content\', recentContent);\n    \n    return selected.content;\n  }\n}\n\nclass TemplateManager {\n  constructor() {\n    this.templates = {\n      greeting: [\n        "ä½ å¥½ï¼ä»Šå¤©æ„Ÿè§‰å¦‚ä½•ï¼Ÿ",\n        "æ—©ä¸Šå¥½ï¼å‡†å¤‡å¥½æ–°çš„å†’é™©äº†å—ï¼Ÿ",\n        "æ¬¢è¿å›æ¥ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©çš„å—ï¼Ÿ"\n      ],\n      battle_start: [\n        "æˆ˜æ–—å¼€å§‹ï¼å‡†å¤‡è¿æ¥æŒ‘æˆ˜ï¼",\n        "æ•Œäººå‡ºç°äº†ï¼å°å¿ƒåº”å¯¹ï¼",\n        "å±é™©é€¼è¿‘ï¼å±•ç¤ºä½ çš„å®åŠ›å§ï¼"\n      ]\n    };\n  }\n  \n  getTemplate(type) {\n    return this.templates[type] || [];\n  }\n}\n'}}class k extends v{category='automation';check(e){let t=0;const n=[];return e.automation.stateTracking.length>0?(t+=.3,n.push(`å‘ç°${e.automation.stateTracking.length}ä¸ªçŠ¶æ€è·Ÿè¸ªæœºåˆ¶`)):n.push('ç¼ºå°‘è‡ªåŠ¨çŠ¶æ€è·Ÿè¸ª'),e.automation.autoResponses.length>0?(t+=.3,n.push(`å‘ç°${e.automation.autoResponses.length}ä¸ªè‡ªåŠ¨å“åº”`)):n.push('ç¼ºå°‘è‡ªåŠ¨å“åº”æœºåˆ¶'),e.automation.variableManagement.length>0?(t+=.2,n.push(`å‘ç°${e.automation.variableManagement.length}ä¸ªå˜é‡ç®¡ç†æœºåˆ¶`)):n.push('ç¼ºå°‘å˜é‡ç®¡ç†'),e.automation.eventTriggers.length>0?(t+=.2,n.push(`å‘ç°${e.automation.eventTriggers.length}ä¸ªäº‹ä»¶è§¦å‘å™¨`)):n.push('ç¼ºå°‘äº‹ä»¶è§¦å‘å™¨'),{score:t,weight:.25,details:n,category:this.category}}}class E extends v{category='user_friendliness';check(e){let t=0;const n=[],a=this.checkWorldbook(e.worldbook);t+=a.score,n.push(...a.details);const r=this.checkVariableComplexity(e.variables);t+=r.score,n.push(...r.details);const s=this.checkScriptComplexity(e.scripts);return t+=s.score,n.push(...s.details),{score:t,weight:.2,details:n,category:this.category}}checkWorldbook(e){return 0===e.length?{score:0,details:['æ²¡æœ‰ä¸–ç•Œä¹¦æ¡ç›®']}:e.length>20?{score:.2,details:['ä¸–ç•Œä¹¦æ¡ç›®è¿‡å¤šï¼Œå¯èƒ½å½±å“ç”¨æˆ·ä½“éªŒ']}:e.length<=10?{score:.4,details:[`ä¸–ç•Œä¹¦æ¡ç›®æ•°é‡é€‚ä¸­(${e.length}ä¸ª)`]}:{score:.3,details:[`ä¸–ç•Œä¹¦æ¡ç›®è¾ƒå¤š(${e.length}ä¸ª)`]}}checkVariableComplexity(e){if(0===e.length)return{score:.3,details:['æ²¡æœ‰ä½¿ç”¨å˜é‡ç³»ç»Ÿ']};return e.filter(e=>e.name.includes('.')||e.name.includes('[')||e.name.length>20).length/e.length>.5?{score:.2,details:['å˜é‡å‘½åè¿‡äºå¤æ‚']}:{score:.3,details:[`å˜é‡ä½¿ç”¨åˆç†(${e.length}ä¸ªå˜é‡)`]}}checkScriptComplexity(e){if(0===e.length)return{score:.3,details:['æ²¡æœ‰ä½¿ç”¨è„šæœ¬']};const t=e.reduce((e,t)=>e+(t.code?.split('\n').length||0),0);return t>200?{score:.1,details:['è„šæœ¬è¿‡äºå¤æ‚']}:t<=50?{score:.3,details:['è„šæœ¬å¤æ‚åº¦é€‚ä¸­']}:{score:.2,details:['è„šæœ¬è¾ƒä¸ºå¤æ‚']}}}class b extends v{category='immersion';check(e){let t=0;const n=[];return e.basicInfo.description&&e.basicInfo.description.length>100?(t+=.3,n.push('è§’è‰²æè¿°è¯¦ç»†å®Œæ•´')):n.push('è§’è‰²æè¿°è¿‡äºç®€å•'),e.basicInfo.personality&&e.basicInfo.personality.length>50?(t+=.3,n.push('æ€§æ ¼è®¾å®šä¸°å¯Œ')):n.push('æ€§æ ¼è®¾å®šä¸å¤Ÿè¯¦ç»†'),e.basicInfo.mes_example&&e.basicInfo.mes_example.length>100?(t+=.2,n.push('åŒ…å«ä¸°å¯Œçš„ç¤ºä¾‹å¯¹è¯')):n.push('ç¼ºå°‘è¶³å¤Ÿçš„ç¤ºä¾‹å¯¹è¯'),e.basicInfo.scenario&&e.basicInfo.scenario.length>50?(t+=.2,n.push('åœºæ™¯è®¾å®šå®Œæ•´')):n.push('åœºæ™¯è®¾å®šä¸å¤Ÿè¯¦ç»†'),{score:t,weight:.2,details:n,category:this.category}}}class V extends v{category='state_management';check(e){let t=0;const n=[],a=e.variables.filter(e=>/^(hp|mp|stamina|level|exp|money|status)$/i.test(e.name));a.length>=3?(t+=.4,n.push(`å‘ç°${a.length}ä¸ªçŠ¶æ€å˜é‡`)):a.length>0?(t+=.2,n.push(`çŠ¶æ€å˜é‡æ•°é‡è¾ƒå°‘(${a.length}ä¸ª)`)):n.push('ç¼ºå°‘åŸºæœ¬çŠ¶æ€å˜é‡'),e.automation.stateTracking.length>0?(t+=.4,n.push('å…·å¤‡çŠ¶æ€è‡ªåŠ¨è·Ÿè¸ªåŠŸèƒ½')):n.push('ç¼ºå°‘çŠ¶æ€è·Ÿè¸ªæœºåˆ¶');return e.variables.filter(e=>e.scope&&'unknown'!==e.scope).length/e.variables.length>.7?(t+=.2,n.push('å˜é‡ä½œç”¨åŸŸç®¡ç†è‰¯å¥½')):n.push('å˜é‡ä½œç”¨åŸŸç®¡ç†éœ€è¦æ”¹è¿›'),{score:t,weight:.2,details:n,category:this.category}}}class w extends v{category='content_generation';check(e){let t=0;const n=[];e.automation.dynamicContent.length>0?(t+=.4,n.push(`å‘ç°${e.automation.dynamicContent.length}ä¸ªåŠ¨æ€å†…å®¹æœºåˆ¶`)):n.push('ç¼ºå°‘åŠ¨æ€å†…å®¹ç”Ÿæˆ');const a=e.variables.filter(e=>e.name.includes('random')||e.name.includes('choice'));return a.length>0?(t+=.3,n.push(`å‘ç°${a.length}ä¸ªéšæœºåŒ–å…ƒç´ `)):n.push('ç¼ºå°‘éšæœºåŒ–å…ƒç´ '),e.automation.autoResponses.length>0?(t+=.3,n.push('å…·å¤‡æ¡ä»¶å“åº”åŠŸèƒ½')):n.push('ç¼ºå°‘æ¡ä»¶å“åº”æœºåˆ¶'),{score:t,weight:.15,details:n,category:this.category}}}const x={class:'card-detail-view'},N={class:'detail-header'},C={class:'detail-content'},S=(0,a.defineComponent)({__name:'CardDetailView',props:{title:{}},setup:e=>(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',x,[(0,a.createElementVNode)('div',N,[(0,a.createElementVNode)('h3',null,(0,a.toDisplayString)(e.title),1)]),(0,a.createElementVNode)('div',C,[(0,a.renderSlot)(e.$slots,'default')])]))});var B=n(88);const T=(0,B.A)(S,[['__scopeId','data-v-5abf1394']]),M={class:'comparison-view'},A={class:'comparison-content'},D={key:0,class:'empty-state'},P={key:1,class:'comparison-grid'},I=(0,a.defineComponent)({__name:'ComparisonView',props:{cards:{}},setup:e=>(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',M,[t[1]||(t[1]=(0,a.createElementVNode)('div',{class:'comparison-header'},[(0,a.createElementVNode)('h3',null,'è§’è‰²å¡å¯¹æ¯”åˆ†æ')],-1)),(0,a.createElementVNode)('div',A,[0===e.cards.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',D,[...t[0]||(t[0]=[(0,a.createElementVNode)('p',null,'æš‚æ— è§’è‰²å¡å¯ä¾›å¯¹æ¯”',-1)])])):((0,a.openBlock)(),(0,a.createElementBlock)('div',P,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.cards,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.id,class:'card-item'},[(0,a.createElementVNode)('h4',null,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('p',null,'0å±‚æ¸¸ç©åˆ†æ•°: '+(0,a.toDisplayString)(e.score)+'%',1)]))),128))]))])]))}),F=(0,B.A)(I,[['__scopeId','data-v-7d674960']]),H={class:'implementation-suggestions'},L={class:'suggestions-content'},j={key:0,class:'empty-state'},O={key:1,class:'suggestions-list'},R={class:'suggestion-header'},J={class:'suggestion-description'},G={key:0,class:'suggestion-steps'},U={key:1,class:'suggestion-code'},W=(0,a.defineComponent)({__name:'ImplementationSuggestions',props:{suggestions:{}},setup(e){function t(e){switch(e){case'easy':return'ç®€å•';case'medium':return'ä¸­ç­‰';case'hard':return'å›°éš¾';default:return'æœªçŸ¥'}}return(e,n)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',H,[n[3]||(n[3]=(0,a.createElementVNode)('div',{class:'suggestions-header'},[(0,a.createElementVNode)('h3',null,'å®ç°å»ºè®®')],-1)),(0,a.createElementVNode)('div',L,[0===e.suggestions.length?((0,a.openBlock)(),(0,a.createElementBlock)('div',j,[...n[0]||(n[0]=[(0,a.createElementVNode)('p',null,'æš‚æ— å®ç°å»ºè®®',-1)])])):((0,a.openBlock)(),(0,a.createElementBlock)('div',O,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.suggestions,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.id,class:'suggestion-item'},[(0,a.createElementVNode)('div',R,[(0,a.createElementVNode)('h4',null,(0,a.toDisplayString)(e.title),1),(0,a.createElementVNode)('span',{class:(0,a.normalizeClass)(['difficulty-badge',e.difficulty])},(0,a.toDisplayString)(t(e.difficulty)),3)]),(0,a.createElementVNode)('p',J,(0,a.toDisplayString)(e.description),1),e.steps?((0,a.openBlock)(),(0,a.createElementBlock)('div',G,[n[1]||(n[1]=(0,a.createElementVNode)('h5',null,'å®ç°æ­¥éª¤:',-1)),(0,a.createElementVNode)('ol',null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.steps,e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e},(0,a.toDisplayString)(e),1))),128))])])):(0,a.createCommentVNode)('v-if',!0),e.code?((0,a.openBlock)(),(0,a.createElementBlock)('div',U,[n[2]||(n[2]=(0,a.createElementVNode)('h5',null,'ç¤ºä¾‹ä»£ç :',-1)),(0,a.createElementVNode)('pre',null,[(0,a.createElementVNode)('code',null,(0,a.toDisplayString)(e.code),1)])])):(0,a.createCommentVNode)('v-if',!0)]))),128))]))])]))}}),X=(0,B.A)(W,[['__scopeId','data-v-209546fa']]),Z={class:'zero-layer-assessment'},q={class:'assessment-header'},Q={class:'overall-score'},K={class:'assessment-content'},Y={class:'categories-grid'},ee={class:'category-header'},te={class:'category-score'},ne={class:'progress-bar'},ae={class:'category-details'},re={class:'strengths-weaknesses'},se={class:'strengths'},oe={class:'weaknesses'},le=(0,a.defineComponent)({__name:'ZeroLayerAssessment',props:{overallScore:{},categories:{},strengths:{},weaknesses:{}},setup:e=>(e,t)=>{return(0,a.openBlock)(),(0,a.createElementBlock)('div',Z,[(0,a.createElementVNode)('div',q,[t[1]||(t[1]=(0,a.createElementVNode)('h3',null,'0å±‚æ¸¸ç©è¯„ä¼°',-1)),(0,a.createElementVNode)('div',Q,[t[0]||(t[0]=(0,a.createElementVNode)('span',{class:'score-label'},'æ€»åˆ†:',-1)),(0,a.createElementVNode)('span',{class:(0,a.normalizeClass)(['score-value',(n=e.overallScore,n>=90?'excellent':n>=70?'good':n>=50?'average':'poor')])},(0,a.toDisplayString)(e.overallScore)+'% ',3)])]),(0,a.createElementVNode)('div',K,[(0,a.createElementVNode)('div',Y,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.categories,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.name,class:'category-item'},[(0,a.createElementVNode)('div',ee,[(0,a.createElementVNode)('h4',null,(0,a.toDisplayString)(e.name),1),(0,a.createElementVNode)('span',te,(0,a.toDisplayString)(e.score)+'%',1)]),(0,a.createElementVNode)('div',ne,[(0,a.createElementVNode)('div',{class:'progress-fill',style:(0,a.normalizeStyle)({width:e.score+'%'})},null,4)]),(0,a.createElementVNode)('ul',ae,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.details,e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e},(0,a.toDisplayString)(e),1))),128))])]))),128))]),(0,a.createElementVNode)('div',re,[(0,a.createElementVNode)('div',se,[t[2]||(t[2]=(0,a.createElementVNode)('h4',null,'ä¼˜åŠ¿',-1)),(0,a.createElementVNode)('ul',null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.strengths,e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e},(0,a.toDisplayString)(e),1))),128))])]),(0,a.createElementVNode)('div',oe,[t[3]||(t[3]=(0,a.createElementVNode)('h4',null,'éœ€è¦æ”¹è¿›',-1)),(0,a.createElementVNode)('ul',null,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.weaknesses,e=>((0,a.openBlock)(),(0,a.createElementBlock)('li',{key:e},(0,a.toDisplayString)(e),1))),128))])])])])]);var n}}),ce=(0,B.A)(le,[['__scopeId','data-v-25441c24']]),ie={class:'character-card-analyzer'},de={class:'upload-section'},pe={key:0,class:'analysis-progress'},me={class:'progress-header'},ue={class:'progress-bar'},ge={class:'progress-stage'},he={key:1,class:'analysis-results'},ye={class:'results-overview'},ve={class:'overview-stats'},fe={class:'stat-item'},ke={class:'stat-value'},Ee={class:'stat-item'},be={class:'stat-value'},Ve={class:'stat-item'},we={class:'stat-value'},xe={class:'tab-container'},Ne={class:'tab-headers'},Ce=['onClick'],_e={key:0,class:'tab-content'},Se={class:'card-list'},Be=['onClick'],Te={class:'card-basic-info'},Me={class:'card-creator'},Ae={class:'card-scores'},De={class:'overall-score'},Pe={class:'category-scores'},Ie={class:'category-name'},ze={class:'score-bar'},Fe={key:1,class:'tab-content'},He={key:2,class:'tab-content'},Le={key:3,class:'tab-content'},$e={key:4,class:'tab-content'},je={key:2,class:'empty-state'},Oe=(0,a.defineComponent)({__name:'CharacterCardAnalyzer',setup(e){const t=new m,n=new s,r=new f,o=(0,a.ref)(!1),l=(0,a.ref)(!1),c=(0,a.ref)({current:0,total:0,stage:''}),i=(0,a.ref)([]),d=(0,a.ref)(null),p=(0,a.ref)('list'),u=(0,a.ref)(),g=[{key:'list',label:'è§’è‰²å¡åˆ—è¡¨'},{key:'detail',label:'è¯¦ç»†åˆ†æ'},{key:'assessment',label:'0å±‚æ¸¸ç©è¯„ä¼°'},{key:'suggestions',label:'å®ç°å»ºè®®'},{key:'compare',label:'å¯¹æ¯”åˆ†æ'}],h=(0,a.computed)(()=>0===c.value.total?0:c.value.current/c.value.total*100),y=(0,a.computed)(()=>d.value?i.value.find(e=>e.card.id===d.value.id):null),v=(0,a.computed)(()=>{if(0===i.value.length)return 0;return i.value.reduce((e,t)=>e+t.zeroLayerAnalysis.overallScore,0)/i.value.length}),k=(0,a.computed)(()=>0===i.value.length?0:Math.max(...i.value.map(e=>e.zeroLayerAnalysis.overallScore))),E=()=>{u.value?.click()},b=e=>{const t=e.target;t.files&&w(t.files)},V=e=>{e.preventDefault(),o.value=!1,e.dataTransfer?.files&&w(e.dataTransfer.files)},w=async e=>{if(0!==e.length){l.value=!0,c.value={current:0,total:e.length,stage:'å¯¼å…¥è§’è‰²å¡'};try{const a=await t.importMultipleCards(e);c.value.stage='æå–æ•°æ®';for(let e=0;e<a.length;e++){const t=a[e];c.value.current=e+1,c.value.stage=`åˆ†æ ${t.name}`;const s=n.extractAllData(t),o=r.analyzeZeroLayerImplementation(s);i.value.push({card:t,extractedData:s,zeroLayerAnalysis:o,recommendations:o.recommendations}),await new Promise(e=>setTimeout(e,100))}i.value.length>0&&(d.value=i.value[0].card)}catch(e){console.error('åˆ†æå¤±è´¥:',e),alert('åˆ†æå¤±è´¥: '+e.message)}finally{l.value=!1}}},x=e=>e>=4?'score-excellent':e>=3?'score-good':e>=2?'score-fair':'score-poor',N=e=>({automation:'è‡ªåŠ¨åŒ–',user_friendliness:'ç”¨æˆ·å‹å¥½',immersion:'æ²‰æµ¸æ„Ÿ',state_management:'çŠ¶æ€ç®¡ç†',content_generation:'å†…å®¹ç”Ÿæˆ'}[e]||e);return(0,a.onMounted)(()=>{}),(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',ie,[(0,a.createCommentVNode)(' æ ‡é¢˜åŒºåŸŸ '),t[10]||(t[10]=(0,a.createElementVNode)('div',{class:'analyzer-header'},[(0,a.createElementVNode)('h2',null,'è§’è‰²å¡åˆ†æå·¥å…·'),(0,a.createElementVNode)('p',null,'è§£æè§’è‰²å¡æ•°æ®ï¼Œåˆ†æ0å±‚æ¸¸ç©å®ç°ç¨‹åº¦')],-1)),(0,a.createCommentVNode)(' æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ '),(0,a.createElementVNode)('div',de,[(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['upload-area',{dragover:o.value}]),onDrop:V,onDragover:t[0]||(t[0]=(0,a.withModifiers)(e=>o.value=!0,['prevent'])),onDragleave:t[1]||(t[1]=e=>o.value=!1),onClick:E},[...t[2]||(t[2]=[(0,a.createElementVNode)('i',{class:'upload-icon'},'ğŸ“',-1),(0,a.createElementVNode)('p',null,'æ‹–æ”¾è§’è‰²å¡æ–‡ä»¶åˆ°è¿™é‡Œï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶',-1),(0,a.createElementVNode)('p',{class:'upload-hint'},'æ”¯æŒ .json, .png, .webp, .jpg æ ¼å¼',-1)])],34),(0,a.createElementVNode)('input',{ref_key:'fileInput',ref:u,type:'file',multiple:'',accept:'.json,.png,.webp,.jpg,.jpeg',onChange:b,style:{display:'none'}},null,544)]),(0,a.createCommentVNode)(' åˆ†æè¿›åº¦ '),l.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',pe,[(0,a.createElementVNode)('div',me,[t[3]||(t[3]=(0,a.createElementVNode)('h3',null,'æ­£åœ¨åˆ†æ...',-1)),(0,a.createElementVNode)('span',null,(0,a.toDisplayString)(c.value.current)+'/'+(0,a.toDisplayString)(c.value.total),1)]),(0,a.createElementVNode)('div',ue,[(0,a.createElementVNode)('div',{class:'progress-fill',style:(0,a.normalizeStyle)({width:h.value+'%'})},null,4)]),(0,a.createElementVNode)('p',ge,(0,a.toDisplayString)(c.value.stage),1)])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' åˆ†æç»“æœ '),i.value.length>0?((0,a.openBlock)(),(0,a.createElementBlock)('div',he,[(0,a.createCommentVNode)(' ç»“æœæ¦‚è§ˆ '),(0,a.createElementVNode)('div',ye,[t[7]||(t[7]=(0,a.createElementVNode)('h3',null,'åˆ†æç»“æœæ¦‚è§ˆ',-1)),(0,a.createElementVNode)('div',ve,[(0,a.createElementVNode)('div',fe,[t[4]||(t[4]=(0,a.createElementVNode)('span',{class:'stat-label'},'å·²åˆ†æè§’è‰²å¡',-1)),(0,a.createElementVNode)('span',ke,(0,a.toDisplayString)(i.value.length),1)]),(0,a.createElementVNode)('div',Ee,[t[5]||(t[5]=(0,a.createElementVNode)('span',{class:'stat-label'},'å¹³å‡0å±‚æ¸¸ç©å¾—åˆ†',-1)),(0,a.createElementVNode)('span',be,(0,a.toDisplayString)(v.value.toFixed(1))+'/5.0',1)]),(0,a.createElementVNode)('div',Ve,[t[6]||(t[6]=(0,a.createElementVNode)('span',{class:'stat-label'},'æœ€é«˜å¾—åˆ†',-1)),(0,a.createElementVNode)('span',we,(0,a.toDisplayString)(k.value.toFixed(1))+'/5.0',1)])])]),(0,a.createCommentVNode)(' é€‰é¡¹å¡ '),(0,a.createElementVNode)('div',xe,[(0,a.createElementVNode)('div',Ne,[((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(g,e=>(0,a.createElementVNode)('button',{key:e.key,class:(0,a.normalizeClass)(['tab-header',{active:p.value===e.key}]),onClick:t=>p.value=e.key},(0,a.toDisplayString)(e.label),11,Ce)),64))]),(0,a.createCommentVNode)(' è§’è‰²å¡åˆ—è¡¨ '),'list'===p.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',_e,[(0,a.createElementVNode)('div',Se,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(i.value,e=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:e.card.id,class:(0,a.normalizeClass)(['card-item',{selected:d.value?.id===e.card.id}]),onClick:t=>{return n=e.card,d.value=n,void('list'===p.value&&(p.value='detail'));var n}},[(0,a.createElementVNode)('div',Te,[(0,a.createElementVNode)('h4',null,(0,a.toDisplayString)(e.card.name),1),(0,a.createElementVNode)('p',Me,'by '+(0,a.toDisplayString)(e.card.creator||'æœªçŸ¥'),1)]),(0,a.createElementVNode)('div',Ae,[(0,a.createElementVNode)('div',De,[t[8]||(t[8]=(0,a.createElementVNode)('span',{class:'score-label'},'æ€»åˆ†',-1)),(0,a.createElementVNode)('span',{class:(0,a.normalizeClass)(['score-value',x(e.zeroLayerAnalysis.overallScore)])},(0,a.toDisplayString)(e.zeroLayerAnalysis.overallScore.toFixed(1)),3)]),(0,a.createElementVNode)('div',Pe,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.zeroLayerAnalysis.categories,(e,t)=>((0,a.openBlock)(),(0,a.createElementBlock)('div',{key:t,class:'category-score'},[(0,a.createElementVNode)('span',Ie,(0,a.toDisplayString)(N(t)),1),(0,a.createElementVNode)('div',ze,[(0,a.createElementVNode)('div',{class:(0,a.normalizeClass)(['score-fill',x(5*e.score)]),style:(0,a.normalizeStyle)({width:100*e.score+'%'})},null,6)])]))),128))])])],10,Be))),128))])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' è¯¦ç»†åˆ†æ '),'detail'===p.value&&d.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',Fe,[(0,a.createVNode)(T,{card:d.value,analysis:y.value},null,8,['card','analysis'])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' 0å±‚æ¸¸ç©è¯„ä¼° '),'assessment'===p.value&&d.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',He,[(0,a.createVNode)(ce,{assessment:y.value.zeroLayerAnalysis},null,8,['assessment'])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' å®ç°å»ºè®® '),'suggestions'===p.value&&d.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',Le,[(0,a.createVNode)(X,{suggestions:y.value.recommendations},null,8,['suggestions'])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' å¯¹æ¯”åˆ†æ '),'compare'===p.value?((0,a.openBlock)(),(0,a.createElementBlock)('div',$e,[(0,a.createVNode)(F,{results:i.value},null,8,['results'])])):(0,a.createCommentVNode)('v-if',!0)])])):(0,a.createCommentVNode)('v-if',!0),(0,a.createCommentVNode)(' ç©ºçŠ¶æ€ '),l.value||0!==i.value.length?(0,a.createCommentVNode)('v-if',!0):((0,a.openBlock)(),(0,a.createElementBlock)('div',je,[...t[9]||(t[9]=[(0,a.createElementVNode)('i',{class:'empty-icon'},'ğŸ“Š',-1),(0,a.createElementVNode)('h3',null,'è¿˜æ²¡æœ‰åˆ†ææ•°æ®',-1),(0,a.createElementVNode)('p',null,'è¯·ä¸Šä¼ è§’è‰²å¡æ–‡ä»¶å¼€å§‹åˆ†æ',-1)])]))]))}}),Re=(0,B.A)(Oe,[['__scopeId','data-v-0c6696a0']]);class Je{importer;extractor;zeroLayerAnalyzer;constructor(){this.importer=new m,this.extractor=new s,this.zeroLayerAnalyzer=new f,console.log('è§’è‰²å¡åˆ†æå™¨åº”ç”¨å·²åˆå§‹åŒ–')}async analyzeFile(e){try{console.log('å¼€å§‹åˆ†ææ–‡ä»¶:',e.name);const t=await this.importer.importCard(e);console.log('è§’è‰²å¡æ•°æ®å¯¼å…¥å®Œæˆ:',t);const n=this.extractor.extractAllData(t.data);console.log('æ•°æ®æå–å®Œæˆ:',n);const a=this.zeroLayerAnalyzer.analyzeZeroLayerImplementation(n);console.log('0å±‚æ¸¸ç©åˆ†æå®Œæˆ:',a);const r={basicInfo:this.extractBasicInfo(t),zeroLayerAnalysis:this.convertZeroLayerAnalysis(a),worldbookAnalysis:this.analyzeWorldbook(n),regexAnalysis:this.analyzeRegex(n),codeExtraction:this.extractCode(n)};return console.log('å®Œæ•´åˆ†æç»“æœ:',r),r}catch(e){throw console.error('æ–‡ä»¶åˆ†æå¤±è´¥:',e),new Error(`æ–‡ä»¶åˆ†æå¤±è´¥: ${e?.message||'æœªçŸ¥é”™è¯¯'}`)}}convertZeroLayerAnalysis(e){return{score:e.overallScore||0,details:{è‡ªåŠ¨åŒ–ç¨‹åº¦:e.categories?.automation?.score||0,ç”¨æˆ·å‹å¥½æ€§:e.categories?.userFriendliness?.score||0,æ²‰æµ¸æ„Ÿ:e.categories?.immersion?.score||0,çŠ¶æ€ç®¡ç†:e.categories?.stateManagement?.score||0,å†…å®¹ç”Ÿæˆ:e.categories?.contentGeneration?.score||0,æ€»ä½“è¯„ä»·:e.overallScore>=80?'ä¼˜ç§€':e.overallScore>=60?'è‰¯å¥½':e.overallScore>=40?'ä¸€èˆ¬':'éœ€è¦æ”¹è¿›'},tips:e.recommendations?.map(e=>e.title)||[]}}extractBasicInfo(e){const t={},n=e.data||e;return n.name&&(t['è§’è‰²åç§°']=n.name),n.description&&(t['è§’è‰²æè¿°']=n.description.substring(0,200)+'...'),n.personality&&(t['æ€§æ ¼è®¾å®š']=n.personality.substring(0,100)+'...'),n.scenario&&(t['åœºæ™¯è®¾å®š']=n.scenario.substring(0,100)+'...'),n.first_mes&&(t['å¼€åœºç™½']=n.first_mes.substring(0,100)+'...'),n.mes_example&&(t['å¯¹è¯ç¤ºä¾‹']=n.mes_example.substring(0,100)+'...'),n.creator&&(t['åˆ›å»ºè€…']=n.creator),n.character_version&&(t['è§’è‰²ç‰ˆæœ¬']=n.character_version),n.tags&&n.tags.length>0&&(t['æ ‡ç­¾']=n.tags.join(', ')),n.extensions&&(t['æ‰©å±•æ•°é‡']=Object.keys(n.extensions).length,t['ä½¿ç”¨çš„æ‰©å±•']=Object.keys(n.extensions).join(', ')),t}analyzeWorldbook(e){const t=(e.worldbook||{}).entries||[];let n=0;return t.forEach(e=>{e.keys&&(n+=e.keys.length)}),{entryCount:t.length,keywordCount:n,complexity:this.calculateWorldbookComplexity(t),entries:t.slice(0,5)}}analyzeRegex(e){const t=e.regex||[],n=t.map(e=>({find:e.find,replace:e.replace,flags:e.flags}));return{regexCount:t.length,complexity:this.calculateRegexComplexity(t),patterns:n}}extractCode(e){return{scripts:e.scripts||'',config:{variables:e.variables||{},settings:e.settings||{},extensions:e.extensions||{}}}}calculateWorldbookComplexity(e){return 0===e.length?'æ— ':e.length<5?'ç®€å•':e.length<15?'ä¸­ç­‰':'å¤æ‚'}calculateRegexComplexity(e){return 0===e.length?'æ— ':e.length<3?'ç®€å•':e.length<10?'ä¸­ç­‰':'å¤æ‚'}}function Ge(){console.log('åˆå§‹åŒ–è§’è‰²å¡åˆ†æå·¥å…·...');const e=new Je;window.CharacterCardAnalyzerApp=e;if(document.getElementById('app')){(0,a.createApp)(Re).mount('#app'),console.log('Vueåº”ç”¨å·²æŒ‚è½½')}console.log('è§’è‰²å¡åˆ†æå·¥å…·åˆå§‹åŒ–å®Œæˆ')}function Ue(e){if(0===e)return'0 Bytes';const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+' '+['Bytes','KB','MB','GB'][t]}function We(e){switch(e.name.toLowerCase().split('.').pop()){case'json':return'json';case'png':return'png';case'webp':return'webp';default:return'unknown'}}function Xe(e){if(!e||'object'!=typeof e)return!1;const t=['name'];for(const n of t)if(!e[n])return!1;return!0}const _=Je;'undefined'!=typeof window&&('loading'===document.readyState?document.addEventListener('DOMContentLoaded',Ge):Ge()),console.log('è§’è‰²å¡åˆ†æå·¥å…·æ¨¡å—å·²åŠ è½½');export{Je as CharacterCardAnalyzerApp,_ as default,We as detectFileType,Ue as formatFileSize,Xe as validateCharacterCardData};</script><style>.card-detail-view[data-v-5abf1394]{background:white;border-radius:8px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1);margin-bottom:20px}.detail-header[data-v-5abf1394]{border-bottom:2px solid #e2e8f0;padding-bottom:10px;margin-bottom:20px}.detail-header h3[data-v-5abf1394]{margin:0;color:#1e293b;font-size:1.25rem}.detail-content[data-v-5abf1394]{color:#374151}

.comparison-view[data-v-7d674960]{background:white;border-radius:8px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}.comparison-header h3[data-v-7d674960]{margin:0 0 20px 0;color:#1e293b}.comparison-grid[data-v-7d674960]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px}.card-item[data-v-7d674960]{background:#f8fafc;padding:15px;border-radius:6px;border:1px solid #e2e8f0}.card-item h4[data-v-7d674960]{margin:0 0 10px 0;color:#374151}.empty-state[data-v-7d674960]{text-align:center;color:#6b7280;padding:40px}

.implementation-suggestions[data-v-209546fa]{background:white;border-radius:8px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}.suggestions-header h3[data-v-209546fa]{margin:0 0 20px 0;color:#1e293b}.suggestion-item[data-v-209546fa]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:20px;margin-bottom:20px}.suggestion-header[data-v-209546fa]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.suggestion-header h4[data-v-209546fa]{margin:0;color:#374151}.difficulty-badge[data-v-209546fa]{padding:4px 12px;border-radius:20px;font-size:0.75rem;font-weight:600;text-transform:uppercase}.difficulty-badge.easy[data-v-209546fa]{background:#d1fae5;color:#047857}.difficulty-badge.medium[data-v-209546fa]{background:#fef3c7;color:#92400e}.difficulty-badge.hard[data-v-209546fa]{background:#fee2e2;color:#dc2626}.suggestion-description[data-v-209546fa]{color:#6b7280;margin-bottom:15px}.suggestion-steps h5[data-v-209546fa],.suggestion-code h5[data-v-209546fa]{color:#374151;margin:15px 0 10px 0;font-size:0.9rem}.suggestion-steps ol[data-v-209546fa]{color:#6b7280;padding-left:20px}.suggestion-code pre[data-v-209546fa]{background:#1e293b;color:#e2e8f0;padding:15px;border-radius:6px;overflow-x:auto;font-size:0.85rem}.empty-state[data-v-209546fa]{text-align:center;color:#6b7280;padding:40px}

.zero-layer-assessment[data-v-25441c24]{background:white;border-radius:8px;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}.assessment-header[data-v-25441c24]{display:flex;justify-content:space-between;align-items:center;margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid #e2e8f0}.assessment-header h3[data-v-25441c24]{margin:0;color:#1e293b}.overall-score[data-v-25441c24]{display:flex;align-items:center;gap:10px}.score-label[data-v-25441c24]{font-weight:600;color:#374151}.score-value[data-v-25441c24]{padding:8px 16px;border-radius:20px;font-weight:700;font-size:1.2rem;color:white}.score-value.excellent[data-v-25441c24]{background:#10b981}.score-value.good[data-v-25441c24]{background:#3b82f6}.score-value.average[data-v-25441c24]{background:#f59e0b}.score-value.poor[data-v-25441c24]{background:#ef4444}.categories-grid[data-v-25441c24]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-bottom:30px}.category-item[data-v-25441c24]{background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:20px}.category-header[data-v-25441c24]{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.category-header h4[data-v-25441c24]{margin:0;color:#374151}.category-score[data-v-25441c24]{font-weight:600;color:#4f46e5}.progress-bar[data-v-25441c24]{width:100%;height:8px;background:#e2e8f0;border-radius:4px;overflow:hidden;margin-bottom:15px}.progress-fill[data-v-25441c24]{height:100%;background:linear-gradient(90deg,#4f46e5,#7c3aed);transition:width 0.3s ease}.category-details[data-v-25441c24]{color:#6b7280;font-size:0.9rem;padding-left:20px}.category-details li[data-v-25441c24]{margin-bottom:5px}.strengths-weaknesses[data-v-25441c24]{display:grid;grid-template-columns:1fr 1fr;gap:30px}.strengths h4[data-v-25441c24],.weaknesses h4[data-v-25441c24]{color:#374151;margin-bottom:15px}.strengths ul[data-v-25441c24]{color:#059669;padding-left:20px}.weaknesses ul[data-v-25441c24]{color:#dc2626;padding-left:20px}.strengths li[data-v-25441c24],.weaknesses li[data-v-25441c24]{margin-bottom:8px}@media (max-width:768px){.assessment-header[data-v-25441c24]{flex-direction:column;align-items:flex-start;gap:15px}.categories-grid[data-v-25441c24]{grid-template-columns:1fr}.strengths-weaknesses[data-v-25441c24]{grid-template-columns:1fr;gap:20px}}

.character-card-analyzer[data-v-0c6696a0]{max-width:1200px;margin:0 auto;padding:20px;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif}.analyzer-header[data-v-0c6696a0]{text-align:center;margin-bottom:30px}.analyzer-header h2[data-v-0c6696a0]{color:#2c3e50;margin-bottom:8px}.analyzer-header p[data-v-0c6696a0]{color:#7f8c8d;font-size:14px}.upload-section[data-v-0c6696a0]{margin-bottom:30px}.upload-area[data-v-0c6696a0]{border:2px dashed #bdc3c7;border-radius:8px;padding:40px;text-align:center;cursor:pointer;transition:all 0.3s ease;background-color:#f8f9fa}.upload-area[data-v-0c6696a0]:hover,.upload-area.dragover[data-v-0c6696a0]{border-color:#3498db;background-color:#e3f2fd}.upload-icon[data-v-0c6696a0]{font-size:48px;display:block;margin-bottom:16px}.upload-hint[data-v-0c6696a0]{font-size:12px;color:#95a5a6;margin-top:8px}.analysis-progress[data-v-0c6696a0]{background:white;border-radius:8px;padding:20px;box-shadow:0 2px 8px rgba(0,0,0,0.1);margin-bottom:20px}.progress-header[data-v-0c6696a0]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.progress-header h3[data-v-0c6696a0]{margin:0;color:#2c3e50}.progress-bar[data-v-0c6696a0]{width:100%;height:8px;background-color:#ecf0f1;border-radius:4px;overflow:hidden;margin-bottom:8px}.progress-fill[data-v-0c6696a0]{height:100%;background-color:#3498db;transition:width 0.3s ease}.progress-stage[data-v-0c6696a0]{font-size:14px;color:#7f8c8d;margin:0}.results-overview[data-v-0c6696a0]{background:white;border-radius:8px;padding:20px;margin-bottom:20px;box-shadow:0 2px 8px rgba(0,0,0,0.1)}.overview-stats[data-v-0c6696a0]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:16px}.stat-item[data-v-0c6696a0]{text-align:center}.stat-label[data-v-0c6696a0]{display:block;font-size:14px;color:#7f8c8d;margin-bottom:4px}.stat-value[data-v-0c6696a0]{display:block;font-size:24px;font-weight:bold;color:#2c3e50}.tab-container[data-v-0c6696a0]{background:white;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);overflow:hidden}.tab-headers[data-v-0c6696a0]{display:flex;border-bottom:1px solid #ecf0f1}.tab-header[data-v-0c6696a0]{flex:1;padding:16px;border:none;background:transparent;cursor:pointer;transition:all 0.3s ease;font-size:14px;font-weight:500}.tab-header[data-v-0c6696a0]:hover{background-color:#f8f9fa}.tab-header.active[data-v-0c6696a0]{background-color:#3498db;color:white}.tab-content[data-v-0c6696a0]{padding:20px}.card-list[data-v-0c6696a0]{display:grid;gap:16px}.card-item[data-v-0c6696a0]{border:1px solid #ecf0f1;border-radius:8px;padding:16px;cursor:pointer;transition:all 0.3s ease}.card-item[data-v-0c6696a0]:hover{box-shadow:0 4px 12px rgba(0,0,0,0.1);transform:translateY(-2px)}.card-item.selected[data-v-0c6696a0]{border-color:#3498db;box-shadow:0 0 0 2px rgba(52,152,219,0.2)}.card-basic-info h4[data-v-0c6696a0]{margin:0 0 4px 0;color:#2c3e50}.card-creator[data-v-0c6696a0]{margin:0;font-size:12px;color:#7f8c8d}.card-scores[data-v-0c6696a0]{margin-top:12px}.overall-score[data-v-0c6696a0]{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.score-label[data-v-0c6696a0]{font-size:14px;color:#7f8c8d}.score-value[data-v-0c6696a0]{font-size:18px;font-weight:bold}.score-excellent[data-v-0c6696a0]{color:#27ae60}.score-good[data-v-0c6696a0]{color:#f39c12}.score-fair[data-v-0c6696a0]{color:#e67e22}.score-poor[data-v-0c6696a0]{color:#e74c3c}.category-scores[data-v-0c6696a0]{display:grid;gap:4px}.category-score[data-v-0c6696a0]{display:flex;align-items:center;gap:8px;font-size:12px}.category-name[data-v-0c6696a0]{width:60px;color:#7f8c8d}.score-bar[data-v-0c6696a0]{flex:1;height:4px;background-color:#ecf0f1;border-radius:2px;overflow:hidden}.score-fill[data-v-0c6696a0]{height:100%;border-radius:2px;transition:width 0.3s ease}.empty-state[data-v-0c6696a0]{text-align:center;padding:60px 20px;color:#7f8c8d}.empty-icon[data-v-0c6696a0]{font-size:64px;display:block;margin-bottom:16px}.empty-state h3[data-v-0c6696a0]{margin:0 0 8px 0;color:#95a5a6}.empty-state p[data-v-0c6696a0]{margin:0;font-size:14px}

</style></head><body><div class="container"><div class="header"><h1>ğŸ­ è§’è‰²å¡åˆ†æå·¥å…·</h1><p>è§£æSillyTavernè§’è‰²å¡ï¼Œåˆ†æ0å±‚æ¸¸ç©å®ç°æŠ€å·§</p></div><div class="main-content"><div class="upload-section" id="uploadSection"><div class="upload-icon">ğŸ“</div><div class="upload-text">æ‹–æ”¾è§’è‰²å¡æ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»æŒ‰é’®é€‰æ‹©æ–‡ä»¶</div><div class="upload-text" style="font-size:.9rem;color:#64748b">æ”¯æŒæ ¼å¼ï¼š.json, .png (å¸¦å…ƒæ•°æ®), .webp (å¸¦å…ƒæ•°æ®)</div><input type="file" id="fileInput" class="file-input" accept=".json,.png,.webp"/> <button class="upload-button" onclick='document.getElementById("fileInput").click()'>é€‰æ‹©æ–‡ä»¶</button></div><div id="errorMessage" class="error-message" style="display:none"></div><div id="loadingState" class="loading" style="display:none"><div class="spinner"></div><p>æ­£åœ¨åˆ†æè§’è‰²å¡...</p></div><div id="analysisResults" style="display:none"><div class="analysis-tabs"><button class="tab-button active" data-tab="basic">åŸºç¡€ä¿¡æ¯</button> <button class="tab-button" data-tab="zero-layer">0å±‚æ¸¸ç©åˆ†æ</button> <button class="tab-button" data-tab="worldbook">ä¸–ç•Œä¹¦åˆ†æ</button> <button class="tab-button" data-tab="regex">æ­£åˆ™åˆ†æ</button> <button class="tab-button" data-tab="code">ä»£ç æå–</button></div><div id="tab-basic" class="tab-content active"><div class="result-card"><h3>ğŸ“Š è§’è‰²åŸºç¡€ä¿¡æ¯</h3><div class="data-grid" id="basicInfo"></div></div></div><div id="tab-zero-layer" class="tab-content"><div class="result-card"><h3>ğŸ® 0å±‚æ¸¸ç©åˆ†æ</h3><div class="analysis-score" id="zeroLayerScore"></div><div id="zeroLayerAnalysis"></div></div><div class="result-card"><h3>ğŸ’¡ ä¼˜åŒ–å»ºè®®</h3><ul class="tips-list" id="optimizationTips"></ul></div></div><div id="tab-worldbook" class="tab-content"><div class="result-card"><h3>ğŸ“š ä¸–ç•Œä¹¦æ¡ç›®åˆ†æ</h3><div id="worldbookAnalysis"></div></div></div><div id="tab-regex" class="tab-content"><div class="result-card"><h3>ğŸ” æ­£åˆ™è¡¨è¾¾å¼åˆ†æ</h3><div id="regexAnalysis"></div></div></div><div id="tab-code" class="tab-content"><div class="result-card"><h3>ğŸ’» æå–çš„ä»£ç å’Œé…ç½®</h3><div id="codeExtraction"></div></div></div><div class="export-section"><h3>ğŸ“¤ å¯¼å‡ºåˆ†æç»“æœ</h3><button class="export-button" onclick="exportToJSON()">å¯¼å‡ºä¸ºJSON</button> <button class="export-button" onclick="exportToMarkdown()">å¯¼å‡ºä¸ºMarkdown</button> <button class="export-button" onclick="copyAnalysis()">å¤åˆ¶åˆ°å‰ªè´´æ¿</button></div></div></div></div><div id="app"></div><script>let currentAnalysisData=null,characterCardAnalyzer=null;function setupFileUpload(){const e=document.getElementById("uploadSection"),n=document.getElementById("fileInput");e.addEventListener("dragover",n=>{n.preventDefault(),e.classList.add("dragover")}),e.addEventListener("dragleave",n=>{n.preventDefault(),e.classList.remove("dragover")}),e.addEventListener("drop",n=>{n.preventDefault(),e.classList.remove("dragover");const a=n.dataTransfer.files;a.length>0&&handleFileUpload(a[0])}),n.addEventListener("change",e=>{e.target.files.length>0&&handleFileUpload(e.target.files[0])})}function setupTabNavigation(){const e=document.querySelectorAll(".tab-button"),n=document.querySelectorAll(".tab-content");e.forEach(a=>{a.addEventListener("click",()=>{const t=a.getAttribute("data-tab");e.forEach(e=>e.classList.remove("active")),n.forEach(e=>e.classList.remove("active")),a.classList.add("active"),document.getElementById(`tab-${t}`).classList.add("active")})})}async function handleFileUpload(e){try{if(showLoading(!0),hideError(),console.log("å¼€å§‹å¤„ç†æ–‡ä»¶:",e.name),!window.CharacterCardAnalyzerApp)throw new Error("åˆ†æå™¨æ¨¡å—æœªåŠ è½½");{const n=await window.CharacterCardAnalyzerApp.analyzeFile(e);currentAnalysisData=n,displayAnalysisResults(n)}}catch(e){console.error("æ–‡ä»¶å¤„ç†é”™è¯¯:",e),showError("æ–‡ä»¶å¤„ç†å¤±è´¥: "+e.message)}finally{showLoading(!1)}}function displayAnalysisResults(e){document.getElementById("analysisResults").style.display="block",displayBasicInfo(e.basicInfo),displayZeroLayerAnalysis(e.zeroLayerAnalysis),displayWorldbookAnalysis(e.worldbookAnalysis),displayRegexAnalysis(e.regexAnalysis),displayCodeExtraction(e.codeExtraction)}function displayBasicInfo(e){const n=document.getElementById("basicInfo");n.innerHTML="",Object.entries(e).forEach(([e,a])=>{const t=document.createElement("div");t.className="data-item",t.innerHTML=`\n                    <div class="data-label">${e}</div>\n                    <div class="data-value">${"object"==typeof a?JSON.stringify(a,null,2):a}</div>\n                `,n.appendChild(t)})}function displayZeroLayerAnalysis(e){const n=document.getElementById("zeroLayerScore"),a=document.getElementById("zeroLayerAnalysis"),t=document.getElementById("optimizationTips"),i=e.score||0;let s="score-poor";i>=90?s="score-excellent":i>=70?s="score-good":i>=50&&(s="score-average"),n.innerHTML=`\n                <div class="score-label">0å±‚æ¸¸ç©å®ç°åº¦</div>\n                <div class="score-value ${s}">${i}%</div>\n            `,a.innerHTML=`\n                <div class="data-grid">\n                    ${Object.entries(e.details||{}).map(([e,n])=>`\n                        <div class="data-item">\n                            <div class="data-label">${e}</div>\n                            <div class="data-value">${n}</div>\n                        </div>\n                    `).join("")}\n                </div>\n            `,t.innerHTML="",(e.tips||[]).forEach(e=>{const n=document.createElement("li");n.textContent=e,t.appendChild(n)})}function displayWorldbookAnalysis(e){document.getElementById("worldbookAnalysis").innerHTML=`\n                <div class="data-grid">\n                    <div class="data-item">\n                        <div class="data-label">ä¸–ç•Œä¹¦æ¡ç›®æ•°é‡</div>\n                        <div class="data-value">${e.entryCount||0}</div>\n                    </div>\n                    <div class="data-item">\n                        <div class="data-label">è§¦å‘å…³é”®è¯æ€»æ•°</div>\n                        <div class="data-value">${e.keywordCount||0}</div>\n                    </div>\n                    <div class="data-item">\n                        <div class="data-label">å¤æ‚åº¦è¯„ä¼°</div>\n                        <div class="data-value">${e.complexity||"æœªçŸ¥"}</div>\n                    </div>\n                </div>\n                <div style="margin-top: 20px;">\n                    <h4>ä¸»è¦æ¡ç›®:</h4>\n                    <div class="code-preview">${JSON.stringify(e.entries||[],null,2)}</div>\n                </div>\n            `}function displayRegexAnalysis(e){document.getElementById("regexAnalysis").innerHTML=`\n                <div class="data-grid">\n                    <div class="data-item">\n                        <div class="data-label">æ­£åˆ™è¡¨è¾¾å¼æ•°é‡</div>\n                        <div class="data-value">${e.regexCount||0}</div>\n                    </div>\n                    <div class="data-item">\n                        <div class="data-label">å¤æ‚åº¦ç­‰çº§</div>\n                        <div class="data-value">${e.complexity||"ç®€å•"}</div>\n                    </div>\n                </div>\n                <div style="margin-top: 20px;">\n                    <h4>æ£€æµ‹åˆ°çš„æ­£åˆ™è¡¨è¾¾å¼:</h4>\n                    <div class="code-preview">${JSON.stringify(e.patterns||[],null,2)}</div>\n                </div>\n            `}function displayCodeExtraction(e){document.getElementById("codeExtraction").innerHTML=`\n                <div class="data-item">\n                    <div class="data-label">è„šæœ¬ä»£ç </div>\n                    <div class="code-preview">${highlightCode(e.scripts||"// æœªæ£€æµ‹åˆ°è„šæœ¬ä»£ç ")}</div>\n                </div>\n                <div class="data-item">\n                    <div class="data-label">é…ç½®æ•°æ®</div>\n                    <div class="code-preview">${JSON.stringify(e.config||{},null,2)}</div>\n                </div>\n            `}function highlightCode(e){return e.replace(/\b(function|const|let|var|if|else|for|while|return)\b/g,'<span class="highlight-keyword">$1</span>').replace(/"([^"]*)"/g,'<span class="highlight-string">"$1"</span>').replace(/\b(\d+)\b/g,'<span class="highlight-number">$1</span>')}function showLoading(e){document.getElementById("loadingState").style.display=e?"block":"none"}function showError(e){const n=document.getElementById("errorMessage");n.textContent=e,n.style.display="block"}function hideError(){document.getElementById("errorMessage").style.display="none"}function exportToJSON(){if(!currentAnalysisData)return;const e=JSON.stringify(currentAnalysisData,null,2),n=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(n),t=document.createElement("a");t.href=a,t.download="character_card_analysis.json",t.click(),URL.revokeObjectURL(a)}function exportToMarkdown(){if(!currentAnalysisData)return;const e=generateMarkdownReport(currentAnalysisData),n=new Blob([e],{type:"text/markdown"}),a=URL.createObjectURL(n),t=document.createElement("a");t.href=a,t.download="character_card_analysis.md",t.click(),URL.revokeObjectURL(a)}function copyAnalysis(){if(!currentAnalysisData)return;const e=generateMarkdownReport(currentAnalysisData);navigator.clipboard.writeText(e).then(()=>{alert("åˆ†æç»“æœå·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}).catch(e=>{console.error("å¤åˆ¶å¤±è´¥:",e)})}function generateMarkdownReport(e){return`# è§’è‰²å¡åˆ†ææŠ¥å‘Š\n\n## åŸºç¡€ä¿¡æ¯\n${Object.entries(e.basicInfo||{}).map(([e,n])=>`- **${e}**: ${n}`).join("\n")}\n\n## 0å±‚æ¸¸ç©åˆ†æ\n- **å®ç°åº¦**: ${e.zeroLayerAnalysis?.score||0}%\n- **åˆ†æè¯¦æƒ…**: \n${Object.entries(e.zeroLayerAnalysis?.details||{}).map(([e,n])=>`  - ${e}: ${n}`).join("\n")}\n\n## ä¼˜åŒ–å»ºè®®\n${(e.zeroLayerAnalysis?.tips||[]).map(e=>`- ${e}`).join("\n")}\n\n## ä¸–ç•Œä¹¦åˆ†æ\n- **æ¡ç›®æ•°é‡**: ${e.worldbookAnalysis?.entryCount||0}\n- **å…³é”®è¯æ€»æ•°**: ${e.worldbookAnalysis?.keywordCount||0}\n- **å¤æ‚åº¦**: ${e.worldbookAnalysis?.complexity||"æœªçŸ¥"}\n\n## æ­£åˆ™åˆ†æ\n- **æ­£åˆ™æ•°é‡**: ${e.regexAnalysis?.regexCount||0}\n- **å¤æ‚åº¦**: ${e.regexAnalysis?.complexity||"ç®€å•"}\n\n---\n*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: ${(new Date).toLocaleString()}*\n`}document.addEventListener("DOMContentLoaded",function(){setupFileUpload(),setupTabNavigation(),console.log("è§’è‰²å¡åˆ†æå·¥å…·å·²åˆå§‹åŒ–")})</script></body></html>